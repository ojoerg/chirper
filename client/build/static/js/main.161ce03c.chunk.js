(this.webpackJsonpchirper=this.webpackJsonpchirper||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(6),c=n.n(l),o=n(1),u=n.n(o),s=n(4),p=n(3),i=n(7),m=n(2),d=function(e,t){switch(t.type){case"GET_POSTS":return Object(m.a)({},e,{loading:!1,posts:t.payload});case"TOGGLE_POPUP":return Object(m.a)({},e,{popup:t.payload});case"ADD_POST":return Object(m.a)({},e,{posts:[].concat(Object(i.a)(e.posts),[t.payload])});case"POST_ERROR":return Object(m.a)({},e,{error:t.payload});default:return e}},E={popup:!1,posts:[],error:null,loading:!0,user:"test"},f=Object(a.createContext)(E),b=function(e){var t=e.children,n=Object(a.useReducer)(d,E),l=Object(p.a)(n,2),c=l[0],o=l[1];function i(){return(i=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/v1/posts");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log(n.data),o({type:"GET_POSTS",payload:n.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),o({type:"POST_ERROR",payload:e.t0.response.data.error});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function m(){return(m=Object(s.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,console.log(a),o({type:"ADD_POST",payload:a.data}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),o({type:"POST_ERROR",payload:e.t0.response.data.error});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return r.a.createElement(f.Provider,{value:{popup:c.popup,posts:c.posts,error:c.error,loading:c.loading,getPosts:function(){return i.apply(this,arguments)},togglePopup:function(e){o({type:"TOGGLE_POPUP",payload:e})},addPost:function(e){return m.apply(this,arguments)}}},t)},O=function(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],l=t[1],c=Object(a.useContext)(f),o=c.addPost,u=c.togglePopup;return r.a.createElement("div",{className:"create-post"},r.a.createElement("h3",null,"Create Post"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o({text:n,user:"user"}),u(!1)}},r.a.createElement("input",{type:"textarea",value:n,onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",null,"Submit")))},v=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup"},r.a.createElement(O,null)))},h=function(){var e=Object(a.useContext)(f).popup,t=Object(a.useContext)(f).togglePopup;return r.a.createElement("div",{className:"header-container"},r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header-div"},r.a.createElement("i",{className:"fas fa-dove fa-2x"}),r.a.createElement("h1",null,"Chirper")),r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return t(!e)}},"Post")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return t(!e)}},"Users")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return t(!e)}},"Profile")),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return t(!e)}},"Logout"))))),e?r.a.createElement(v,null):null)},g=function(e){return e<10?"0"+e:e},y=function(){var e=Object(a.useContext)(f),t=e.posts,n=e.getPosts;return Object(a.useEffect)((function(){n()}),[]),r.a.createElement("div",{className:"feed"},t.reverse().map((function(e){var t=new Date(e.created);return console.log(t),r.a.createElement("div",{key:e._id},e.user,r.a.createElement("br",null),r.a.createElement("br",null),e.text,r.a.createElement("br",null),r.a.createElement("br",null),g(t.getHours()),":",g(t.getMinutes())," ","- ",g(t.getDate()),".",g(t.getMonth()),".",t.getFullYear(),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null))})))};n(14);var P=function(){return r.a.createElement(b,null,r.a.createElement(h,null),r.a.createElement(y,null))};c.a.render(r.a.createElement(P,null),document.getElementById("root"))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.161ce03c.chunk.js.map