{"version":3,"sources":["context/AppReducer.js","context/GlobalState.js","components/CreatePost.js","components/Popup.js","components/Header.js","utils/format.js","components/Feed.js","App.js","index.js"],"names":["state","action","type","loading","posts","payload","popup","error","initialState","user","GlobalContext","createContext","GlobalProvider","children","useReducer","AppReducer","dispatch","a","fetch","res","json","console","log","data","response","post","method","headers","body","JSON","stringify","Provider","value","getPosts","togglePopup","boolVal","addPost","CreatePost","useState","text","setText","useContext","className","onSubmit","e","preventDefault","onChange","target","Popup","Header","onClick","addZeroToNumbers","dateItem","Feed","useEffect","reverse","map","postObject","date","Date","created","key","_id","getHours","getMinutes","getDate","getMonth","getFullYear","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.161ce03c.chunk.js","sourcesContent":["export default (state, action) => {\r\n  switch (action.type) {\r\n    case \"GET_POSTS\":\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        posts: action.payload\r\n      }\r\n    case \"TOGGLE_POPUP\":\r\n      return {\r\n        ...state,\r\n        popup: action.payload\r\n      };\r\n    case \"ADD_POST\":\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, action.payload]\r\n      };\r\n    case \"POST_ERROR\":\r\n      return {\r\n        ...state,\r\n        error: action.payload\r\n      }\r\n\r\n    \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React, { createContext, useReducer } from \"react\";\r\nimport AppReducer from \"./AppReducer\";\r\n\r\n// Initial State\r\n\r\nconst initialState = {\r\n  popup: false,\r\n  posts: [],\r\n  error: null,\r\n  loading: true,\r\n  user: \"test\"\r\n};\r\n\r\n// Create context\r\nexport const GlobalContext = createContext(initialState);\r\n\r\n// Provider Component\r\nexport const GlobalProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AppReducer, initialState);\r\n\r\n  // Actions\r\n  async function getPosts() {\r\n    try {\r\n      const res = await fetch(\"api/v1/posts\");\r\n      const posts = await res.json();\r\n      console.log(posts.data);\r\n\r\n      dispatch({\r\n        type: \"GET_POSTS\",\r\n        payload: posts.data\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"POST_ERROR\",\r\n        payload: err.response.data.error\r\n      });\r\n    }\r\n  }\r\n\r\n  function togglePopup(boolVal) {\r\n    dispatch({\r\n      type: \"TOGGLE_POPUP\",\r\n      payload: boolVal\r\n    });\r\n  }\r\n\r\n  async function addPost(post) {\r\n    try {\r\n      const res = await fetch(\"api/v1/posts\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(post)\r\n      });\r\n      const response = await res.json();\r\n\r\n      console.log(response);\r\n\r\n      dispatch({\r\n        type: \"ADD_POST\",\r\n        payload: response.data\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"POST_ERROR\",\r\n        payload: err.response.data.error\r\n      });\r\n    }\r\n  }\r\n\r\n  /*function addPost(postText){\r\n        dispatch({\r\n            type: \"ADD_POST\",\r\n            payload: postText\r\n        })\r\n    }*/\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{\r\n        popup: state.popup,\r\n        posts: state.posts,\r\n        error: state.error,\r\n        loading: state.loading,\r\n        getPosts,\r\n        togglePopup,\r\n        addPost\r\n      }}>\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\n\r\nexport const CreatePost = () => {\r\n    const [text, setText] = useState(\"\");\r\n\r\n    const { addPost, togglePopup } = useContext(GlobalContext);\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n        \r\n        const newPost = {\r\n          text: text,\r\n          user: \"user\"\r\n        }\r\n    \r\n        addPost(newPost);\r\n        togglePopup(false)\r\n      }\r\n    return (\r\n        <div className=\"create-post\">\r\n        <h3>Create Post</h3>\r\n        <form onSubmit={onSubmit}>\r\n            <input type=\"textarea\" value={text} onChange={(e) => setText(e.target.value)}></input>\r\n            <button>Submit</button>\r\n        </form>\r\n        </div>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport { CreatePost }from './CreatePost'\r\n\r\nexport const Popup = () => {\r\n\r\n  return (\r\n    <>\r\n      <div className=\"popup\">\r\n        <CreatePost />    \r\n      </div>\r\n      \r\n    </>);\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport { Popup } from \"./Popup\";\r\n\r\nexport const Header = () => {\r\n  const { popup } = useContext(GlobalContext);\r\n  const { togglePopup } = useContext(GlobalContext);\r\n\r\n  return (\r\n    <div className=\"header-container\">\r\n      <header className=\"header\">\r\n        <div className=\"header-div\">\r\n          <i className=\"fas fa-dove fa-2x\"></i>\r\n          <h1>Chirper</h1>\r\n        </div>\r\n        <nav>\r\n          <ul>\r\n            <li>\r\n              <button onClick={() => togglePopup(!popup)}>Post</button>\r\n            </li>\r\n            <li>\r\n              <button onClick={() => togglePopup(!popup)}>Users</button>\r\n            </li>\r\n            <li>\r\n              <button onClick={() => togglePopup(!popup)}>Profile</button>\r\n            </li>\r\n            <li>\r\n              <button onClick={() => togglePopup(!popup)}>Logout</button>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </header>\r\n      {popup ? <Popup /> : null}\r\n    </div>\r\n  );\r\n};\r\n","export const addZeroToNumbers = dateItem => {\r\n    if (dateItem < 10) {\r\n      return \"0\" + dateItem;\r\n    } else {\r\n      return dateItem;\r\n    }\r\n  };","import React, { useContext, useEffect } from \"react\";\r\nimport { GlobalContext } from \"../context/GlobalState\";\r\nimport { addZeroToNumbers } from \"../utils/format\"\r\n\r\nexport const Feed = () => {\r\n  const { posts, getPosts } = useContext(GlobalContext);\r\n\r\n  useEffect(() => {\r\n    getPosts();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // empty array for no loop\r\n\r\n  // if (post[0]) {\r\n  //   console.log(typeof post[0].date.getMinutes());\r\n  //   }\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"feed\">\r\n      {posts.reverse().map(postObject => {\r\n        let date = new Date(postObject.created);\r\n        console.log(date);\r\n        return (\r\n          <div key={postObject._id}>\r\n            {postObject.user}\r\n            <br />\r\n            <br />\r\n            {postObject.text}\r\n            <br />\r\n            <br />\r\n            {addZeroToNumbers(date.getHours())}:\r\n            {addZeroToNumbers(date.getMinutes())}{\" \"}\r\n            - {addZeroToNumbers(date.getDate())}.{addZeroToNumbers(date.getMonth())}.\r\n            {date.getFullYear()}\r\n            <br />\r\n            <br />\r\n            <hr />\r\n            <br />\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\nimport { Header } from \"./components/Header\";\nimport { Feed } from \"./components/Feed\";\nimport { GlobalProvider } from \"./context/GlobalState\";\n\nimport \"./App.css\";\n\nfunction App() {\n\n  return (\n    <GlobalProvider>\n      <Header />\n      <Feed />\n    </GlobalProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}