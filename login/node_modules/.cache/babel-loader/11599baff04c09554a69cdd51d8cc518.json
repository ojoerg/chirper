{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Olli\\\\Projects\\\\full stack\\\\complete\\\\login\\\\src\\\\context\\\\GlobalState.js\";\nimport React, { createContext, useReducer } from \"react\";\nimport AppReducer from \"./AppReducer\"; // Initial State\n\nconst initialState = {\n  page: \"welcome\",\n  // welcome, register, login, home\n  message: \"\"\n}; // Create context\n\nexport const GlobalContext = createContext(initialState); // Provider Component\n\nexport const GlobalProvider = ({\n  children\n}) => {\n  const [state, dispatch] = useReducer(AppReducer, initialState); // Actions\n\n  async function registerUser(user) {\n    try {\n      console.log(user);\n      const res = await fetch(\"api/v1/users/register\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      });\n      const response = await res.json();\n      console.log(response);\n\n      if (response.error) {\n        throw response.error;\n      } else {\n        dispatch({\n          type: \"REGISTER_USER\",\n          payload: \"User successfully created\"\n        });\n      }\n\n      dispatch({\n        type: \"REGISTER_USER\",\n        payload: \"User successfully created\"\n      });\n    } catch (err) {\n      dispatch({\n        type: \"REGISTER_ERROR\",\n        payload: err\n      });\n    }\n  }\n\n  async function loginUser(user) {\n    try {\n      const res = await fetch(\"api/v1/users/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      });\n      const response = await res.json();\n      console.log(response);\n\n      if (response.error) {\n        throw response.error;\n      } else {\n        dispatch({\n          type: \"LOGIN_USER\",\n          payload: response.message\n        });\n      }\n    } catch (err) {\n      console.log(JSON.stringify(err));\n      dispatch({\n        type: \"LOGIN_ERROR\",\n        payload: err.response.data.error\n      });\n    }\n  }\n\n  function changePage(page) {\n    dispatch({\n      type: \"CHANGE_PAGE\",\n      payload: page\n    });\n  }\n\n  return React.createElement(GlobalContext.Provider, {\n    value: {\n      page: state.page,\n      message: state.message,\n      changePage,\n      registerUser,\n      loginUser\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, children);\n};","map":{"version":3,"sources":["C:/Users/Olli/Projects/full stack/complete/login/src/context/GlobalState.js"],"names":["React","createContext","useReducer","AppReducer","initialState","page","message","GlobalContext","GlobalProvider","children","state","dispatch","registerUser","user","console","log","res","fetch","method","headers","body","JSON","stringify","response","json","error","type","payload","err","loginUser","data","changePage"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,QAAiD,OAAjD;AACA,OAAOC,UAAP,MAAuB,cAAvB,C,CAEA;;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,IAAI,EAAE,SADa;AACF;AACjBC,EAAAA,OAAO,EAAE;AAFU,CAArB,C,CAKA;;AACA,OAAO,MAAMC,aAAa,GAAGN,aAAa,CAACG,YAAD,CAAnC,C,CAEP;;AACA,OAAO,MAAMI,cAAc,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAC9C,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,UAAU,CAACC,UAAD,EAAaC,YAAb,CAApC,CAD8C,CAG9C;;AACA,iBAAeQ,YAAf,CAA4BC,IAA5B,EAAkC;AAChC,QAAI;AACFC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,YAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,uBAAD,EAA0B;AAC/CC,QAAAA,MAAM,EAAE,MADuC;AAE/CC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFsC;AAK/CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf;AALyC,OAA1B,CAAvB;AAOA,YAAMU,QAAQ,GAAG,MAAMP,GAAG,CAACQ,IAAJ,EAAvB;AACAV,MAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;;AACA,UAAIA,QAAQ,CAACE,KAAb,EAAmB;AACjB,cAAMF,QAAQ,CAACE,KAAf;AACD,OAFD,MAEO;AACLd,QAAAA,QAAQ,CAAC;AACPe,UAAAA,IAAI,EAAE,eADC;AAEPC,UAAAA,OAAO,EAAE;AAFF,SAAD,CAAR;AAID;;AACDhB,MAAAA,QAAQ,CAAC;AACPe,QAAAA,IAAI,EAAE,eADC;AAEPC,QAAAA,OAAO,EAAE;AAFF,OAAD,CAAR;AAID,KAvBD,CAuBE,OAAOC,GAAP,EAAY;AACZjB,MAAAA,QAAQ,CAAC;AACPe,QAAAA,IAAI,EAAE,gBADC;AAEPC,QAAAA,OAAO,EAAEC;AAFF,OAAD,CAAR;AAID;AACF;;AAED,iBAAeC,SAAf,CAAyBhB,IAAzB,EAA+B;AAC7B,QAAI;AACF,YAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,oBAAD,EAAuB;AAC5CC,QAAAA,MAAM,EAAE,MADoC;AAE5CC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFmC;AAK5CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf;AALsC,OAAvB,CAAvB;AAOA,YAAMU,QAAQ,GAAG,MAAMP,GAAG,CAACQ,IAAJ,EAAvB;AACAV,MAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;;AAEA,UAAIA,QAAQ,CAACE,KAAb,EAAmB;AACjB,cAAMF,QAAQ,CAACE,KAAf;AACD,OAFD,MAEO;AACLd,QAAAA,QAAQ,CAAC;AACPe,UAAAA,IAAI,EAAE,YADC;AAEPC,UAAAA,OAAO,EAAEJ,QAAQ,CAACjB;AAFX,SAAD,CAAR;AAID;AACF,KAnBD,CAmBE,OAAOsB,GAAP,EAAY;AACZd,MAAAA,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACC,SAAL,CAAeM,GAAf,CAAZ;AACAjB,MAAAA,QAAQ,CAAC;AACPe,QAAAA,IAAI,EAAE,aADC;AAEPC,QAAAA,OAAO,EAAEC,GAAG,CAACL,QAAJ,CAAaO,IAAb,CAAkBL;AAFpB,OAAD,CAAR;AAID;AACF;;AAED,WAASM,UAAT,CAAoB1B,IAApB,EAA0B;AACxBM,IAAAA,QAAQ,CAAC;AACPe,MAAAA,IAAI,EAAE,aADC;AAEPC,MAAAA,OAAO,EAAEtB;AAFF,KAAD,CAAR;AAID;;AAED,SACE,oBAAC,aAAD,CAAe,QAAf;AACE,IAAA,KAAK,EAAE;AACLA,MAAAA,IAAI,EAAEK,KAAK,CAACL,IADP;AAELC,MAAAA,OAAO,EAAEI,KAAK,CAACJ,OAFV;AAGLyB,MAAAA,UAHK;AAILnB,MAAAA,YAJK;AAKLiB,MAAAA;AALK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQGpB,QARH,CADF;AAYD,CApFM","sourcesContent":["import React, { createContext, useReducer } from \"react\";\r\nimport AppReducer from \"./AppReducer\";\r\n\r\n// Initial State\r\nconst initialState = {\r\n  page: \"welcome\", // welcome, register, login, home\r\n  message: \"\"\r\n};\r\n\r\n// Create context\r\nexport const GlobalContext = createContext(initialState);\r\n\r\n// Provider Component\r\nexport const GlobalProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(AppReducer, initialState);\r\n\r\n  // Actions\r\n  async function registerUser(user) {\r\n    try {\r\n      console.log(user)\r\n      const res = await fetch(\"api/v1/users/register\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n      });\r\n      const response = await res.json();\r\n      console.log(response);\r\n      if (response.error){\r\n        throw response.error\r\n      } else {\r\n        dispatch({\r\n          type: \"REGISTER_USER\",\r\n          payload: \"User successfully created\"\r\n        });\r\n      }\r\n      dispatch({\r\n        type: \"REGISTER_USER\",\r\n        payload: \"User successfully created\"\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"REGISTER_ERROR\",\r\n        payload: err\r\n      });\r\n    }\r\n  }\r\n\r\n  async function loginUser(user) {\r\n    try {\r\n      const res = await fetch(\"api/v1/users/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n      });\r\n      const response = await res.json();\r\n      console.log(response);\r\n      \r\n      if (response.error){\r\n        throw response.error\r\n      } else {\r\n        dispatch({\r\n          type: \"LOGIN_USER\",\r\n          payload: response.message\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(JSON.stringify(err))\r\n      dispatch({\r\n        type: \"LOGIN_ERROR\",\r\n        payload: err.response.data.error\r\n      });\r\n    }\r\n  }\r\n\r\n  function changePage(page) {\r\n    dispatch({\r\n      type: \"CHANGE_PAGE\",\r\n      payload: page\r\n    });\r\n  }\r\n\r\n  return (\r\n    <GlobalContext.Provider\r\n      value={{\r\n        page: state.page,\r\n        message: state.message,\r\n        changePage,\r\n        registerUser,\r\n        loginUser\r\n      }}>\r\n      {children}\r\n    </GlobalContext.Provider>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}